{"version":3,"sources":["../../src/test/test_fileresult.js"],"names":["Promise","require","mkdirp","promisify","i18nc","i18ncUtil","autoTestUtils","OUTPUT_PATH","__dirname","TMP_PATH","process","env","TEST_BUILD","describe","diffFiles","before","it","json1","isCheckClosureForNewI18NHandler","json2","json3","mulitResult2POFiles","I18NHandler","data","onlyTheseLanguages","then","all"],"mappings":"AAAA;;AAEA,IAAMA,OAAO,GAASC,OAAO,CAAC,UAAD,CAA7B;;AACA,IAAMC,MAAM,GAAUF,OAAO,CAACG,SAAR,CAAkBF,OAAO,CAAC,QAAD,CAAzB,CAAtB;;AACA,IAAMG,KAAK,GAAWH,OAAO,CAAC,YAAD,CAA7B;;AACA,IAAMI,SAAS,GAAOJ,OAAO,CAAC,oBAAD,CAA7B;;AACA,IAAMK,aAAa,GAAGL,OAAO,CAAC,mBAAD,CAA7B;;AAEA,IAAMM,WAAW,GAAKC,SAAS,GAAC,4BAAhC;AACA,IAAMC,QAAQ,GAAQC,OAAO,CAACC,GAAR,CAAYC,UAAZ,GAAyBL,WAAzB,GAAuCC,SAAS,GAAC,yBAAvE;AAEAK,QAAQ,CAAC,aAAD,EAAgB,YACxB;AACCA,EAAAA,QAAQ,CAAC,sBAAD,EAAyB,YACjC;AACC,QAAIC,SAAS,GAAKR,aAAa,CAACQ,SAAd,CAAwBL,QAAQ,GAAC,sBAAjC,EAAyDF,WAAW,GAAC,sBAArE,CAAlB;AACAQ,IAAAA,MAAM,CAAC,YACP;AACC,aAAOb,MAAM,CAACO,QAAQ,GAAC,qBAAV,CAAb;AACA,KAHK,CAAN;AAKAO,IAAAA,EAAE,CAAC,OAAD,EAAU,YACZ;AACC,UAAIC,KAAK,GAAGb,KAAK,CAAC,cAAD,EAAiB;AAACc,QAAAA,+BAA+B,EAAE;AAAlC,OAAjB,CAAjB;AACA,UAAIC,KAAK,GAAGf,KAAK,CAAC,YAAD,EAAe;AAACc,QAAAA,+BAA+B,EAAE;AAAlC,OAAf,CAAjB;AACA,UAAIE,KAAK,GAAGhB,KAAK,CAAC,uBAAD,EAA0B;AAACc,QAAAA,+BAA+B,EAAE;AAAlC,OAA1B,CAAjB;AACA,aAAOb,SAAS,CAACgB,mBAAV,CACN;AACCJ,QAAAA,KAAK,EAAEA,KADR;AAECE,QAAAA,KAAK,EAAEA,KAFR;AAGCC,QAAAA,KAAK,EAAEA;AAHR,OADM,EAMNX,QAAQ,GAAC,qBANH,EAON;AACCa,QAAAA,WAAW,EACX;AACCC,UAAAA,IAAI,EACJ;AACCC,YAAAA,kBAAkB,EAAE,CAAC,OAAD,EAAU,OAAV;AADrB;AAFD;AAFD,OAPM,EAgBLC,IAhBK,CAgBA,YACN;AACC,eAAOzB,OAAO,CAAC0B,GAAR,CACP,CACCZ,SAAS,CAAC,UAAD,CADV,EAECA,SAAS,CAAC,UAAD,CAFV,EAGCA,SAAS,CAAC,UAAD,CAHV,CADO,CAAP;AAMA,OAxBK,CAAP;AAyBA,KA9BC,CAAF;AA+BA,GAvCO,CAAR;AAyCA,CA3CO,CAAR","sourcesContent":["'use strict';\n\nconst Promise       = require('bluebird');\nconst mkdirp        = Promise.promisify(require('mkdirp'));\nconst i18nc         = require('i18nc-core');\nconst i18ncUtil     = require('../util/fileresult');\nconst autoTestUtils = require('./auto_test_utils');\n\nconst OUTPUT_PATH   = __dirname+'/../../global/test/output/';\nconst TMP_PATH      = process.env.TEST_BUILD ? OUTPUT_PATH : __dirname+'/../../global/test/tmp/';\n\ndescribe('#fileresult', function()\n{\n\tdescribe('#mulitResult2POFiles', function()\n\t{\n\t\tlet diffFiles   = autoTestUtils.diffFiles(TMP_PATH+'mulitResult2POFiles/', OUTPUT_PATH+'mulitResult2POFiles/');\n\t\tbefore(function()\n\t\t{\n\t\t\treturn mkdirp(TMP_PATH+'mulitResult2POFiles');\n\t\t});\n\n\t\tit('#base', function()\n\t\t{\n\t\t\tlet json1 = i18nc('talkme(\"中文\")', {isCheckClosureForNewI18NHandler: false});\n\t\t\tlet json2 = i18nc('I18N(\"简体\")', {isCheckClosureForNewI18NHandler: false});\n\t\t\tlet json3 = i18nc('I18N(\"简体\", \"subtype\")', {isCheckClosureForNewI18NHandler: false});\n\t\t\treturn i18ncUtil.mulitResult2POFiles(\n\t\t\t\t{\n\t\t\t\t\tjson1: json1,\n\t\t\t\t\tjson2: json2,\n\t\t\t\t\tjson3: json3,\n\t\t\t\t},\n\t\t\t\tTMP_PATH+'mulitResult2POFiles',\n\t\t\t\t{\n\t\t\t\t\tI18NHandler:\n\t\t\t\t\t{\n\t\t\t\t\t\tdata:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tonlyTheseLanguages: ['zh-TW', 'en-US']\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(function()\n\t\t\t\t{\n\t\t\t\t\treturn Promise.all(\n\t\t\t\t\t[\n\t\t\t\t\t\tdiffFiles('lans.pot'),\n\t\t\t\t\t\tdiffFiles('zh-TW.po'),\n\t\t\t\t\t\tdiffFiles('en-US.po')\n\t\t\t\t\t]);\n\t\t\t\t});\n\t\t});\n\t});\n\n});\n"],"file":"test_fileresult.js"}