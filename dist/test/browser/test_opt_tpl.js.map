{"version":3,"sources":["../../../src/test/browser/test_opt_tpl.js"],"names":["expect","require","getlans","debug","describe","navlans","navigator","languages","language","split","toLowerCase","replace","beforeEach","window","__i18n_lan__","document","cookie","it","cache","onlyWebCookie","to","be","webCookeAndProcssDomian","g","onlyWebNavigator","webNavigatorAndProcessDomain"],"mappings":"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","sourcesContent":["/* global document navigator window */\n\n'use strict';\n\nconst expect = require('expect.js');\nconst getlans = require('../../../test/i18n_getlans');\nconst debug = require('debug')('i18nc:test_opt_tpl');\n\n\ndescribe('#opt_tpl', function()\n{\n\tlet navlans;\n\tif (navigator.languages)\n\t\tnavlans = ''+navigator.languages;\n\telse\n\t\tnavlans = navigator.language+','+navigator.language.split(/-|_/)[0];\n\n\tnavlans = navlans.toLowerCase().replace(/-/g, '_');\n\tdebug('navlans:%s', navlans);\n\n\n\tbeforeEach(function()\n\t{\n\t\twindow.__i18n_lan__ = null;\n\t\tdocument.cookie = 'test_lan=zh-tw,cht';\n\t});\n\n\tit('#onlyWebCookie', function()\n\t{\n\t\tlet cache = {};\n\t\texpect(getlans.onlyWebCookie(cache)).to.be('zh-tw,cht');\n\t\texpect(window.__i18n_lan__).to.be('zh-tw,cht');\n\t\texpect(getlans.onlyWebCookie(cache)).to.be('zh-tw,cht');\n\t});\n\n\tit('#webCookeAndProcssDomian', function()\n\t{\n\t\tlet cache = {};\n\t\texpect(getlans.webCookeAndProcssDomian(cache)).to.be('zh-tw,cht');\n\t\texpect(cache.g).to.be(window);\n\t\texpect(window.__i18n_lan__).to.be('zh-tw,cht');\n\t\texpect(getlans.webCookeAndProcssDomian(cache)).to.be('zh-tw,cht');\n\t});\n\n\tit('#onlyWebNavigator', function()\n\t{\n\t\tlet cache = {};\n\t\texpect(getlans.onlyWebNavigator(cache)).to.be(navlans);\n\t\texpect(window.__i18n_lan__).to.be(navlans);\n\t\texpect(getlans.onlyWebNavigator(cache)).to.be(navlans);\n\t});\n\n\tit('#webNavigatorAndProcessDomain', function()\n\t{\n\t\tlet cache = {};\n\t\texpect(getlans.webNavigatorAndProcessDomain(cache)).to.be(navlans);\n\t\texpect(cache.g).to.be(window);\n\t\texpect(window.__i18n_lan__).to.be(navlans);\n\t\texpect(getlans.webNavigatorAndProcessDomain(cache)).to.be(navlans);\n\t});\n});\n"],"file":"test_opt_tpl.js"}